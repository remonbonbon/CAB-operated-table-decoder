# CAB命令表解読機
適正テストのCABに出てくる
「命令表」問題を解くプログラム

もちろん，WEBテスト用

## 要件
- 出てくる図形は4つ。図形，命令のセットが4行
- 図形は問題ごとに変化する。番号＆お絵かきで図形を識別
- 命令の内容は10種類で固定。命令ボタンに内容を書く
- 命令の図形は問題ごとに変化する。WEBテストは，命令表が下部に表示されるので不必要
- 命令は，上下左右反転，命令取り消し，図形消去，並び替え，である。上から順に処理する。
塗りつぶし，形状の変更などは無い。図形4つ全て並び替える命令が最後に着く場合がある

## UI

```
[クリア] 1図形　命令ボタン　→　?結果図形
[クリア] 2図形　命令ボタン　→　?結果図形
[クリア] 3図形　命令ボタン　→　?結果図形
[クリア] 4図形　命令ボタン　→　?結果図形
         並び替え命令
[全てクリア]
```

- クリックで命令ボタンを選択すると逐次，結果図形が示される
- 現在選択されているボタンの色を変える
- 図形は自分で描画できるようにする
- 結果図形の横の?に元の図形の番号を表示
- 結果図形は元の図形とリンクし，お絵かき結果が常時反映される

## コンポーネント

### UIコンポーネント
#### DrawingPanel
図形，結果図形用
結果図形のはお絵かき機能を禁止したもの
お絵かき・描画専用で，使われる側
お絵かきされると，親に結果の再計算を要求

#### CommandButton
並び替えを除いた，7個で1セット
並び替えのものフラグも用意
選択された命令を強調表示
親に結果の再計算を要求

#### ClearButton
押されると対応した図形を消去する
CommandButtonをリセット
親に結果の再計算を要求

### 処理コンポーネント
#### CAB_commander
UIコンポーネントからの再計算要求で始動

1. CommandButtonより命令を取得
2. 命令を処理する
3. 処理後のCAB_figure[4]を作成
4. DrawingPanelに元の図形，処理結果フラグを渡して描画

#### CAB_figure
元の図形，処理による変化を保有する

↓処理による変化
```
FIG_STAT_FLIP_UD	上下反転
FIG_STAT_FLIP_LR	左右反転
FIG_STAT_ERASE		図形の消去（以後消去のまま状態が変化しない）
※その他の入れ替えはCAB_commanderで処理済み
```

### 命令表
```
CMD_FLIP_UD		上下を反転
CMD_FLIP_LR		左右を反転
CMD_ERASE_U		上の図形を消去
CMD_ERASE_D		下の図形を消去
CMD_CANCEL_U	上の命令を中止
CMD_CANCEL_D	下の命令を中止
CMD_EXCHANGE	上の図形と交換する
CMD_SORT_4321	4321の順に並び替え
CMD_SORT_3412	3412の順に並び替え
CMD_SORT_2143	2143の順に並び替え
```
